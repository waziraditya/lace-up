<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Join SneakPeak</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div style="text-align: right; margin: 10px;">
    <label for="languageSelect" style="color: white; margin-right: 5px;">üåê Change Language:</label>
    <select id="languageSelect" class="language-switcher">
      <option value="en">üåê English</option>
      <option value="hi">üåê ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
    </select>
  </div>

<!-- Hidden container required by Google Translate -->
<div id="dummy_translate_container" style="display: none;"></div>

  <style>
    .demo-info {
      margin-top: 20px;
      padding: 10px;
      background: rgba(102, 126, 234, 0.1);
      border-radius: 8px;
      border-left: 3px solid #667eea;
    }
    .demo-info small {
      color: #667eea;
    }
  </style>
  <div class="auth-form">
    <h2>Join SneakPeak! üëü</h2>
    <input type="text" id="signup-username" placeholder="Choose a username" required />
    <input type="password" id="signup-password" placeholder="Create a password" required />
    <input type="password" id="confirm-password" placeholder="Confirm your password" required />
    <button onclick="signup()" id="signupBtn">
      <span class="btn-text">Create Account</span>
      <div class="loading" id="signupLoading" style="display: none;"></div>
    </button>
    <p>Already have an account? <a href="login.html">Sign in here</a></p>
    <div class="demo-info">
      <small>üëü Start your premium sneaker journey today</small>
    </div>
  </div>

  <script>
    function signup() {
      const username = document.getElementById("signup-username").value.trim();
      const password = document.getElementById("signup-password").value.trim();
      const confirmPassword = document.getElementById("confirm-password").value.trim();
      const signupBtn = document.getElementById("signupBtn");
      const btnText = signupBtn.querySelector('.btn-text');
      const loading = document.getElementById('signupLoading');

      if (!username || !password || !confirmPassword) {
        showError("Please fill in all fields");
        return;
      }

      if (password !== confirmPassword) {
        showError("Passwords do not match");
        return;
      }

      if (password.length < 4) {
        showError("Password must be at least 4 characters long");
        return;
      }

      // Show loading
      btnText.style.display = 'none';
      loading.style.display = 'inline-block';
      signupBtn.disabled = true;

      // Simulate API call delay
      setTimeout(() => {
        let users = JSON.parse(localStorage.getItem("users") || "[]");
        if (users.find(u => u.username === username)) {
          showError("Username already exists. Please choose another.");
          btnText.style.display = 'inline';
          loading.style.display = 'none';
          signupBtn.disabled = false;
          return;
        }

        users.push({ username, password, joinDate: new Date().toISOString() });
        localStorage.setItem("users", JSON.stringify(users));
        showSuccess("Account created successfully! Redirecting to login...");
        
        setTimeout(() => {
          window.location.href = "login.html";
        }, 2000);
      }, 1000);
    }

    function showError(message) {
      const toast = document.createElement('div');
      toast.className = 'toast error';
      toast.textContent = message;
      toast.style.background = 'linear-gradient(45deg, #ff6b6b, #ee5a52)';
      document.body.appendChild(toast);
      
      setTimeout(() => toast.classList.add('show'), 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => document.body.removeChild(toast), 300);
      }, 3000);
    }

    function showSuccess(message) {
      const toast = document.createElement('div');
      toast.className = 'toast success';
      toast.textContent = message;
      toast.style.background = 'linear-gradient(45deg, #51cf66, #40c057)';
      document.body.appendChild(toast);
      
      setTimeout(() => toast.classList.add('show'), 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => document.body.removeChild(toast), 300);
      }, 3000);
    }

    // Enter key support
    document.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        signup();
      }
    });

    // Real-time password confirmation
    document.getElementById('confirm-password').addEventListener('input', (e) => {
      const password = document.getElementById('signup-password').value;
      const confirmPassword = e.target.value;
      
      if (confirmPassword && password !== confirmPassword) {
        e.target.style.borderColor = '#ff6b6b';
      } else {
        e.target.style.borderColor = '#eee';
      }
    });
  </script>
  <script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,hi',
      autoDisplay: false
    }, 'dummy_translate_container');
  }

  function changeLanguage(lang) {
    const select = document.querySelector('.goog-te-combo');
    if (select) {
      select.value = lang;
      select.dispatchEvent(new Event('change'));
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    const customSelect = document.getElementById("languageSelect");
    if (customSelect) {
      customSelect.addEventListener("change", (e) => {
        changeLanguage(e.target.value);
      });
    }
  });
</script>

<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>

